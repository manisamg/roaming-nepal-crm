<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roaming Nepal - Flight Booking CRM</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }

        .nav { background: #1E3A8A; color: white; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; }
        .nav-left { font-size: 20px; font-weight: bold; }
        .nav-right { display: flex; gap: 20px; align-items: center; }
        .nav-right a, .nav-right button { color: white; text-decoration: none; background: none; border: none; cursor: pointer; font-size: 14px; padding: 8px 15px; border-radius: 4px; }
        .nav-right a:hover, .nav-right button:hover { background: #2563EB; }
        .btn-login { background: #F97316; }
        .btn-login:hover { background: #EA580C; }

        .hero { background: linear-gradient(135deg, #1E3A8A, #0D9488); color: white; padding: 80px 30px; text-align: center; }
        .hero h1 { font-size: 48px; margin-bottom: 20px; }
        .hero p { font-size: 18px; margin-bottom: 30px; }
        .hero-buttons { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
        .btn { padding: 12px 24px; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; cursor: pointer; }
        .btn-primary { background: #1E3A8A; color: white; }
        .btn-primary:hover { background: #2563EB; }
        .btn-secondary { background: #F97316; color: white; }
        .btn-secondary:hover { background: #EA580C; }
        .btn-outline { background: transparent; border: 2px solid white; color: white; }
        .btn-outline:hover { background: white; color: #1E3A8A; }

        .search-form { background: white; padding: 30px; max-width: 800px; margin: -40px auto 0; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { font-weight: 600; margin-bottom: 5px; }
        .form-group input, .form-group select { padding: 10px; border: 1px solid #ddd; border-radius: 4px; }

        .section { padding: 60px 30px; max-width: 1200px; margin: 0 auto; }
        .section h2 { font-size: 32px; margin-bottom: 40px; text-align: center; color: #1E3A8A; }

        .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; }
        .feature-card { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; }
        .feature-icon { font-size: 48px; margin-bottom: 15px; }
        .feature-card h3 { margin-bottom: 10px; color: #1E3A8A; }

        .destinations { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .dest-card { background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .dest-image { height: 150px; background: linear-gradient(135deg, #1E3A8A, #0D9488); display: flex; align-items: center; justify-content: center; font-size: 64px; }
        .dest-info { padding: 15px; }
        .dest-info h3 { margin-bottom: 5px; }
        .dest-price { color: #F97316; font-size: 18px; font-weight: bold; }

        .footer { background: #1F2937; color: white; padding: 40px 30px; text-align: center; }

        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-box { background: white; padding: 40px; border-radius: 8px; max-width: 500px; width: 90%; }
        .modal-title { font-size: 24px; margin-bottom: 20px; color: #1E3A8A; }
        .modal-close { float: right; font-size: 28px; cursor: pointer; color: #6B7280; }

        .dashboard { display: none; min-height: 100vh; background: #F3F4F6; }
        .dashboard.active { display: block; }

        .dashboard-nav { background: white; border-bottom: 1px solid #E5E7EB; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; }
        .dashboard-menu { display: flex; gap: 5px; list-style: none; }
        .dashboard-menu li { margin: 0; }
        .dashboard-menu a { padding: 8px 15px; color: #6B7280; text-decoration: none; border-radius: 4px; }
        .dashboard-menu a:hover, .dashboard-menu a.active { background: #EEF2FF; color: #1E3A8A; }

        .dashboard-content { padding: 30px; max-width: 1400px; margin: 0 auto; }
        .page-title { font-size: 28px; margin-bottom: 25px; color: #1E3A8A; }

        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .kpi-card { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .kpi-title { font-size: 14px; color: #6B7280; margin-bottom: 15px; }
        .kpi-value { font-size: 32px; font-weight: 700; color: #111827; margin-bottom: 8px; }

        .data-table { background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 30px; }
        .table-header { padding: 20px 25px; border-bottom: 1px solid #E5E7EB; display: flex; justify-content: space-between; align-items: center; }
        table { width: 100%; border-collapse: collapse; }
        thead { background: #F9FAFB; }
        th { padding: 15px 20px; text-align: left; font-weight: 600; font-size: 13px; color: #6B7280; text-transform: uppercase; }
        td { padding: 15px 20px; border-top: 1px solid #F3F4F6; }
        tbody tr:hover { background: #F9FAFB; }

        .badge { padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; display: inline-block; }
        .badge.red { background: #FEE2E2; color: #991B1B; }
        .badge.green { background: #D1FAE5; color: #065F46; }
        .badge.blue { background: #DBEAFE; color: #1E40AF; }
        .badge.yellow { background: #FEF3C7; color: #92400E; }

        .btn-sm { padding: 6px 12px; font-size: 12px; }

        .error { background: #FEE2E2; color: #991B1B; padding: 12px; border-radius: 4px; margin-bottom: 15px; display: none; }

        .hidden { display: none; }

        @media (max-width: 768px) {
            .hero h1 { font-size: 32px; }
            .form-row { grid-template-columns: 1fr; }
            .nav { flex-direction: column; gap: 10px; }
            .nav-right { width: 100%; justify-content: space-between; }
        }
    </style>
</head>
<body>

<!-- PUBLIC SITE -->
<div id="publicSite">
    <!-- Navigation -->
    <div class="nav">
        <div class="nav-left">‚úàÔ∏è Roaming Nepal</div>
        <div class="nav-right">
            <a href="#home">Home</a>
            <a href="#destinations">Destinations</a>
            <a href="#agencies">For Agencies</a>
            <a href="#contact">Contact</a>
            <button class="btn-login" onclick="showLoginModal()">üîê Login</button>
        </div>
    </div>

    <!-- Hero Section -->
    <div class="hero" id="home">
        <h1>Book International Flights at Best Prices</h1>
        <p>Nepal's Trusted IATA Certified Flight Ticket Stockist</p>
        <div class="hero-buttons">
            <button class="btn btn-primary" onclick="scrollToSearch()">Search Flights</button>
            <button class="btn btn-outline" onclick="showAgencyModal()">Partner With Us</button>
        </div>
    </div>

    <!-- Search Form -->
    <div class="section">
        <div class="search-form" id="searchForm">
            <h3 style="margin-bottom: 20px;">Find Your Flight</h3>
            <div class="form-row">
                <div class="form-group">
                    <label>From</label>
                    <input type="text" value="Kathmandu" id="searchFrom">
                </div>
                <div class="form-group">
                    <label>To</label>
                    <input type="text" id="searchTo" placeholder="Dubai">
                </div>
                <div class="form-group">
                    <label>Date</label>
                    <input type="date" id="searchDate">
                </div>
                <div class="form-group">
                    <label>Passengers</label>
                    <select id="searchPassengers"><option>1</option><option>2</option><option>3</option><option>4+</option></select>
                </div>
            </div>
            <button class="btn btn-primary" onclick="handleSearch()" style="width: 100%; margin-top: 15px;">Search</button>
        </div>
    </div>

    <!-- Features -->
    <div class="section" style="background: #F9FAFB;">
        <h2>Why Choose Us</h2>
        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">‚úì</div>
                <h3>IATA Certified</h3>
                <p>50+ airline partnerships</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üí∞</div>
                <h3>Best Prices</h3>
                <p>Competitive rates guaranteed</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3>Instant Confirmation</h3>
                <p>Real-time booking</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìû</div>
                <h3>24/7 Support</h3>
                <p>Always here to help</p>
            </div>
        </div>
    </div>

    <!-- Destinations -->
    <div class="section" id="destinations">
        <h2>Popular Destinations</h2>
        <div class="destinations" id="destGrid">
            <!-- Will populate -->
        </div>
    </div>

    <!-- Agencies CTA -->
    <div style="background: #F97316; color: white; padding: 60px 30px; text-align: center;" id="agencies">
        <h2 style="color: white; margin-bottom: 20px;">Partner With Us</h2>
        <p style="margin-bottom: 30px; font-size: 16px;">Join 100+ agencies enjoying credit facilities and competitive commissions</p>
        <button class="btn btn-outline" onclick="showAgencyModal()">Register Your Agency</button>
    </div>

    <!-- Footer -->
    <div class="footer" id="contact">
        <h3 style="margin-bottom: 20px;">Contact Us</h3>
        <p>üìû +977-1-4567890 | üìß info@roamingnepal.com | üí¨ +977-9851234567</p>
        <p style="margin-top: 20px; font-size: 12px; color: #6B7280;">Kathmandu, Nepal | 9 AM - 6 PM</p>
    </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="dashboard">
    <div class="dashboard-nav">
        <div class="nav-left">‚úàÔ∏è Roaming Nepal CRM</div>
        <ul class="dashboard-menu" id="dashMenu"></ul>
        <div class="nav-right">
            <button class="btn btn-secondary btn-sm" onclick="logout()">Logout</button>
            <div style="color: #333; font-weight: bold;" id="userInfo"></div>
        </div>
    </div>
    <div class="dashboard-content" id="dashContent"></div>
</div>

<!-- LOGIN MODAL -->
<div class="modal" id="loginModal">
    <div class="modal-box">
        <span class="modal-close" onclick="closeModal('loginModal')">&times;</span>
        <div class="modal-title">Login</div>
        <div class="error" id="loginError">Invalid credentials</div>
        <div class="form-group">
            <label>Username</label>
            <input type="text" id="username" autocomplete="off">
        </div>
        <div class="form-group">
            <label>Password</label>
            <input type="password" id="password">
        </div>
        <div style="margin-top: 15px;">
            <input type="checkbox" id="rememberMe"> Remember Me
        </div>
        <button class="btn btn-primary" onclick="handleLogin()" style="width: 100%; margin-top: 20px;">Login</button>
    </div>
</div>

<!-- AGENCY MODAL -->
<div class="modal" id="agencyModal">
    <div class="modal-box">
        <span class="modal-close" onclick="closeModal('agencyModal')">&times;</span>
        <div class="modal-title">Register Agency</div>
        <div class="form-group">
            <label>Agency Name</label>
            <input type="text" id="agencyName">
        </div>
        <div class="form-group">
            <label>Contact Person</label>
            <input type="text" id="agencyContact">
        </div>
        <div class="form-group">
            <label>Email</label>
            <input type="email" id="agencyEmail">
        </div>
        <div class="form-group">
            <label>Phone</label>
            <input type="tel" id="agencyPhone">
        </div>
        <button class="btn btn-primary" onclick="submitAgency()" style="width: 100%; margin-top: 20px;">Submit</button>
    </div>
</div>

<script>
// Configuration
const SHEETS_CONFIG = {
    apiKey: 'AIzaSyDygZuhTi9eauI2PlBFBsg1_-a7gyrrBXE',
    spreadsheetId: '1RjQ2nrlyRLq1nn--M1-dyivdZAjTETRajW_9gwxWoyM'
};

// Users
const users = {
    'ceo': { password: 'CEO@2025', role: 'CEO', name: 'Rajesh Sharma' },
    'staff': { password: 'Staff@2025', role: 'Staff', name: 'Ramesh Kumar' },
    'agency': { password: 'Agency@2025', role: 'Agency', name: 'Nepal Travel Solutions' },
    'admin': { password: 'Admin@2025', role: 'Admin', name: 'System Administrator' }
};

// Sample Destinations
const destinations = [
    { city: 'Dubai', country: 'UAE', price: 35000, icon: 'üèôÔ∏è' },
    { city: 'Bangkok', country: 'Thailand', price: 25000, icon: 'üèØ' },
    { city: 'Singapore', country: 'Singapore', price: 42000, icon: 'üåÜ' },
    { city: 'Doha', country: 'Qatar', price: 38000, icon: 'üïå' },
    { city: 'Kuala Lumpur', country: 'Malaysia', price: 32000, icon: 'üè¢' },
    { city: 'Delhi', country: 'India', price: 15000, icon: 'üõï' },
    { city: 'Hong Kong', country: 'China', price: 48000, icon: 'üåÉ' },
    { city: 'Seoul', country: 'South Korea', price: 65000, icon: 'üè∞' }
];

// Sample Data
const sampleLeads = [
    { id: 'L001', name: 'Ram Prasad', email: 'ram@email.com', phone: '+977-9851234567', route: 'KTM-DXB', date: '2025-12-25', priority: 'Hot', status: 'New', assigned: 'staff' },
    { id: 'L002', name: 'Sita Gurung', email: 'sita@email.com', phone: '+977-9841234567', route: 'KTM-BKK', date: '2025-12-20', priority: 'Warm', status: 'Follow-up', assigned: 'staff' },
    { id: 'L003', name: 'John Smith', email: 'john@email.com', phone: '+977-9861234567', route: 'KTM-SIN', date: '2026-01-15', priority: 'Warm', status: 'Quoted', assigned: 'staff' }
];

const sampleBookings = [
    { id: 'BK001', customer: 'Ram Sharma', route: 'KTM-DXB', amount: 55000, commission: 3300, status: 'Confirmed' },
    { id: 'BK002', customer: 'Sita Gurung', route: 'KTM-BKK', amount: 35000, commission: 2100, status: 'Ticketed' }
];

let currentUser = null;

// Initialize
window.addEventListener('DOMContentLoaded', function() {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('searchDate').value = today;
    loadDestinations();
    checkSession();
});

// Load destinations
function loadDestinations() {
    const grid = document.getElementById('destGrid');
    grid.innerHTML = destinations.map(d => `
        <div class="dest-card" onclick="fillDestination('${d.city}')">
            <div class="dest-image">${d.icon}</div>
            <div class="dest-info">
                <h3>${d.city}</h3>
                <p>${d.country}</p>
                <div class="dest-price">From NPR ${d.price.toLocaleString()}</div>
            </div>
        </div>
    `).join('');
}

function fillDestination(city) {
    document.getElementById('searchTo').value = city;
    scrollToSearch();
}

function scrollToSearch() {
    document.getElementById('searchForm').scrollIntoView({ behavior: 'smooth' });
}

// Search and lead capture
function handleSearch() {
    const from = document.getElementById('searchFrom').value;
    const to = document.getElementById('searchTo').value;
    if (!to) {
        alert('Please select destination');
        return;
    }
    alert('‚úÖ Lead created!\n\nWe will contact you soon with best prices.\n\nRoute: ' + from + ' ‚Üí ' + to);
}

// Modal functions
function showLoginModal() {
    document.getElementById('loginModal').classList.add('active');
}

function showAgencyModal() {
    document.getElementById('agencyModal').classList.add('active');
}

function closeModal(id) {
    document.getElementById(id).classList.remove('active');
}

// Login
function handleLogin() {
    const username = document.getElementById('username').value.toLowerCase().trim();
    const password = document.getElementById('password').value;
    const rememberMe = document.getElementById('rememberMe').checked;

    if (users[username] && users[username].password === password) {
        currentUser = { username, ...users[username] };

        if (rememberMe) {
            localStorage.setItem('session', JSON.stringify(currentUser));
        }

        closeModal('loginModal');
        showDashboard();
    } else {
        document.getElementById('loginError').style.display = 'block';
        setTimeout(() => document.getElementById('loginError').style.display = 'none', 2000);
    }
}

// Check session
function checkSession() {
    const session = localStorage.getItem('session');
    if (session) {
        try {
            currentUser = JSON.parse(session);
            showDashboard();
        } catch (e) {
            localStorage.removeItem('session');
        }
    }
}

// Show dashboard
function showDashboard() {
    document.getElementById('publicSite').style.display = 'none';
    document.getElementById('dashboard').classList.add('active');
    document.getElementById('userInfo').textContent = currentUser.name + ' (' + currentUser.role + ')';
    loadDashboard();
}

// Load dashboard
function loadDashboard() {
    const content = document.getElementById('dashContent');

    if (currentUser.role === 'CEO') {
        loadCEODashboard();
    } else if (currentUser.role === 'Staff') {
        loadStaffDashboard();
    } else if (currentUser.role === 'Agency') {
        loadAgencyDashboard();
    } else if (currentUser.role === 'Admin') {
        loadAdminDashboard();
    }
}

// CEO Dashboard
function loadCEODashboard() {
    document.getElementById('dashMenu').innerHTML = '<li><a href="#" class="active">Dashboard</a></li><li><a href="#" onclick="alert('Reports')">Reports</a></li>';
    document.getElementById('dashContent').innerHTML = `
        <h1 class="page-title">CEO Dashboard</h1>
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-title">Total Revenue (YTD)</div>
                <div class="kpi-value">NPR 125.6M</div>
                <div style="color: green; font-weight: bold;">‚Üë 31.1%</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">Net Profit</div>
                <div class="kpi-value">NPR 23.2M</div>
                <div style="color: #6B7280;">18.5% margin</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">IATA Credit</div>
                <div class="kpi-value">65%</div>
                <div style="color: #6B7280;">NPR 32.5M / 50M</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">Active Customers</div>
                <div class="kpi-value">2,847</div>
                <div style="color: #6B7280;">B2C + B2B</div>
            </div>
        </div>
        <div class="data-table">
            <div class="table-header"><div class="table-title">üìä Strategic Insights</div></div>
            <div style="padding: 20px;">
                <p>‚úÖ On track to exceed annual targets by 12%</p>
                <p>‚ö†Ô∏è IATA credit 65% utilized - request increase soon</p>
                <p>üìà Dubai route demand up 35% YoY</p>
            </div>
        </div>
    `;
}

// Staff Dashboard
function loadStaffDashboard() {
    document.getElementById('dashMenu').innerHTML = '<li><a href="#" class="active">Dashboard</a></li><li><a href="#" onclick="alert('My Leads')">My Leads</a></li><li><a href="#" onclick="alert('My Customers')">My Customers</a></li>';
    const content = `
        <h1 class="page-title">Staff Dashboard</h1>
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-title">My Leads Today</div>
                <div class="kpi-value">${sampleLeads.length}</div>
                <div style="color: #6B7280;">Hot & Warm leads</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">My Bookings</div>
                <div class="kpi-value">${sampleBookings.length}</div>
                <div style="color: #6B7280;">NPR ${sampleBookings.reduce((s, b) => s + b.amount, 0).toLocaleString()}</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">My Commission</div>
                <div class="kpi-value">NPR ${sampleBookings.reduce((s, b) => s + b.commission, 0).toLocaleString()}</div>
                <div style="color: #6B7280;">This month</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">My Customers</div>
                <div class="kpi-value">45</div>
                <div style="color: #6B7280;">Total bookings</div>
            </div>
        </div>

        <div class="data-table">
            <div class="table-header"><div class="table-title">üìû My Leads</div></div>
            <table>
                <thead><tr><th>Name</th><th>Contact</th><th>Route</th><th>Priority</th><th>Status</th><th>Actions</th></tr></thead>
                <tbody>
                    ${sampleLeads.map(l => `
                        <tr>
                            <td><strong>${l.name}</strong></td>
                            <td>${l.email}<br>${l.phone}</td>
                            <td>${l.route}</td>
                            <td><span class="badge ${l.priority === 'Hot' ? 'red' : 'yellow'}">${l.priority}</span></td>
                            <td><span class="badge blue">${l.status}</span></td>
                            <td><button class="btn btn-sm btn-primary" onclick="alert('Call ${l.name}')">üìû Call</button></td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    `;
    document.getElementById('dashContent').innerHTML = content;
}

// Agency Dashboard
function loadAgencyDashboard() {
    document.getElementById('dashMenu').innerHTML = '<li><a href="#" class="active">Dashboard</a></li><li><a href="#" onclick="alert('Bookings')">Bookings</a></li><li><a href="#" onclick="alert('Commission')">Commission</a></li>';
    document.getElementById('dashContent').innerHTML = `
        <h1 class="page-title">Agency Dashboard</h1>
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-title">Available Credit</div>
                <div class="kpi-value">NPR 450K</div>
                <div style="color: #6B7280;">of 1M limit</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">This Month</div>
                <div class="kpi-value">45</div>
                <div style="color: #6B7280;">Bookings: NPR 1.8M</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">Commission Earned</div>
                <div class="kpi-value">NPR 108K</div>
                <div style="color: #6B7280;">6% rate</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">Payment Due</div>
                <div class="kpi-value">15-Dec</div>
                <div style="color: #6B7280;">NPR 225K</div>
            </div>
        </div>
        <div class="data-table">
            <div class="table-header"><div class="table-title">üí≥ Quick Actions</div></div>
            <div style="padding: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <button class="btn btn-primary" onclick="alert('Top-Up Form')">üîù Request Top-Up</button>
                <button class="btn btn-secondary" onclick="alert('Payment Options')">üí∞ Make Payment</button>
                <button class="btn btn-primary" onclick="alert('Book Flight')">‚úàÔ∏è Book Flight</button>
                <button class="btn btn-secondary" onclick="alert('Download Statement')">üìÑ Statement</button>
            </div>
        </div>
    `;
}

// Admin Dashboard
function loadAdminDashboard() {
    document.getElementById('dashMenu').innerHTML = '<li><a href="#" class="active">Dashboard</a></li><li><a href="#" onclick="alert('Leads')">All Leads</a></li><li><a href="#" onclick="alert('Users')">Users</a></li><li><a href="#" onclick="alert('Settings')">Settings</a></li>';
    document.getElementById('dashContent').innerHTML = `
        <h1 class="page-title">Admin Dashboard</h1>
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-title">Website Leads</div>
                <div class="kpi-value">${sampleLeads.length}</div>
                <div style="color: #6B7280;">Today</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">Pending Agencies</div>
                <div class="kpi-value">5</div>
                <div style="color: #6B7280;">For approval</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">Total Users</div>
                <div class="kpi-value">4</div>
                <div style="color: #6B7280;">System users</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-title">Active Agencies</div>
                <div class="kpi-value">156</div>
                <div style="color: #6B7280;">B2B partners</div>
            </div>
        </div>
        <div class="data-table">
            <div class="table-header"><div class="table-title">üìä Recent Leads</div></div>
            <table>
                <thead><tr><th>Name</th><th>Email</th><th>Route</th><th>Status</th><th>Actions</th></tr></thead>
                <tbody>
                    ${sampleLeads.map(l => `
                        <tr>
                            <td><strong>${l.name}</strong></td>
                            <td>${l.email}</td>
                            <td>${l.route}</td>
                            <td><span class="badge blue">${l.status}</span></td>
                            <td><button class="btn btn-sm btn-primary" onclick="alert('Assign')">Assign</button></td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    `;
}

// Logout
function logout() {
    if (confirm('Logout?')) {
        localStorage.removeItem('session');
        currentUser = null;
        document.getElementById('publicSite').style.display = 'block';
        document.getElementById('dashboard').classList.remove('active');
        document.getElementById('username').value = '';
        document.getElementById('password').value = '';
    }
}

// Agency submission
function submitAgency() {
    const name = document.getElementById('agencyName').value;
    if (!name) {
        alert('Please fill all fields');
        return;
    }
    alert('‚úÖ Application submitted!\n\nWe will review and contact you within 24 hours.');
    closeModal('agencyModal');
}

// Close on outside click
window.onclick = function(event) {
    if (event.target.classList.contains('modal')) {
        event.target.classList.remove('active');
    }
}
</script>

</body>
</html>